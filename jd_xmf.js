/**
 京东小魔方 活动入口：京东app-新品首发-百万京豆
 活动好像是持续进行的，cron还是修改成每天运行就好了。
脚本更新地址：https://raw.githubusercontent.com/i-chenzhe/qx/master/jd_xmf.js

 已支持IOS双京东账号,Node.js支持N个京东账号
 脚本兼容: QuantumultX, Surge, Loon, JSBox, Node.js
 // quantumultx
 [task_local]
 # 京东小魔方
 10 10 * * *   https://raw.githubusercontent.com/i-chenzhe/qx/master/jd_xmf.js, tag= 京东小魔方, enabled=true
 //Loon
 [Script]
 cron "  10 10 * * *   " script-path=https://raw.githubusercontent.com/i-chenzhe/qx/master/jd_xmf.js ,tag= 京东小魔方
 //Surge
  京东小魔方 = type=cron,cronexp="  10 10 * * *   ",wake-system=1,timeout=20,script-path=https://raw.githubusercontent.com/i-chenzhe/qx/master/jd_xmf.js
* */
const $ = new Env('京东小魔方');
const notify = $.isNode() ? require('./sendNotify') : '';
//Node.js用户请在jdCookie.js处填写京东ck;
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
//IOS等用户直接用NobyDa的jd cookie
let cookiesArr = [], cookie = '';
let helpAuthor = true;//为作者助力的开关
if ($.isNode()) {
    Object.keys(jdCookieNode).forEach((item) => {
        cookiesArr.push(jdCookieNode[item])
    })
    if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => { };
} else {
    let cookiesData = $.getdata('CookiesJD') || "[]";
    cookiesData = jsonParse(cookiesData);
    cookiesArr = cookiesData.map(item => item.cookie);
    cookiesArr.reverse();
    cookiesArr.push(...[$.getdata('CookieJD2'), $.getdata('CookieJD')]);
    cookiesArr.reverse();
    cookiesArr = cookiesArr.filter(item => item !== "" && item !== null && item !== undefined);
}
 var _0xod2='jsjiami.com.v6',_0x374c=[_0xod2,'wpMtYMK2w5U=','AsKdNFHCqg==','w7QvDFkCw4k=','w4XCqT3CqXDDicOawqw9wp0H','w5Jxw5xD','w5jCsyjCs2HDksOXwpw=','5LuY5Lmi6LC8','bsOFw7cEw7JSZgfDpcOK','wqBFw63Ci03DrcKqScKOw7w4','wo3CiB3DmMOPw43DkMOZ','IMOWFQ==','6I+75byuUg==','fsOQB2VcZA==','DGFlEVVzZXDDvcKvw40=','wo3Dm8O6w4rCtxTCkcKAO8Ktwp7CgMOTcQ==','wrPCtsOpeXA=','FsKLBmPCgsOiwo3CrjF6woA=','wqolBHE=','w6IQGA==','wp/CqcK5a2zCmA==','w7QnLsOewq0=','YMOaE1VCYg==','fcOPEEhH','wozCvMKjMG3DgsKxw7DDjTAewqY=','wqRew63Cj1vCpcO8L8KIwq95w6vChmXCkcKDw4dSew==','wrh7LMKSR0TDmcKUAho=','wq1aw6nCk0HDvMKydMKJw7U5wqnDgnzCmsOD','alXDon1wFihGwo9Xwq8fIwpAw6QODsOGw4Bdw4lAdzTCgcKEPsKIw7vCuMORLsOpw4k4RDM5wpTDmF0iw6U/ccKnFcOaw4zDscKBOQlfwozDsMOKBMO7w4vCh8OhfsKeCB7Cii02w4h/wrDCgiQ2cgY+LmdYwoArwrMYP3/DiyXDkMK3w6jCjkJLAHrDhBbDi8OgfMO0wqN9aAZiw60zw4XCtcOGw5jDpMOYw5LDrsOESkLDqsKzMWvCqTstTMOEw4UPDMOzWmzCiMKNEMOFCi82ZcKtIsOjwqbDk0XDhcOswrkjwpTCsi45SMO3GiZ/w7xZacOhw5dvw7PDg8KFw4jDlsKJTlHDows/w7wqwrvDsFpGwozDtGVKLDpYO8OrOcOCwpQGw6BEHGnDlcKuw5RBw5MjwrIlNcOywrnDu38db8KJwoVawrIsw6J3wr7DpkLCrR7CkzBYPcKhVVVqw4bDrXBLSsKdw7o9wrjDkTcBw5Exw5UySyQuwr8xZMOGwo9lwrXDrw9OYsOqCMOPw6VFw6PCuMKbwrQWwozDl8Oxw6RhCcKbw5hAWMOYKHwvY8OZwqvCo8KCAcOff1p7w6UswrDClcOIwo0qw4cQAxN0wp3Cj8O/MMO5wqjCigrDpQXCnMKjEcOLw5fDjMKLQF7ChMOLw6TDmCh3woTDtcO/ekDCuE4JAMKBR8OkQjLDvcOMw7/Cj8KVK8OOOQdnw6jCn8OUw7xlw4FORcOSw6cFeMOCVsKgw4zCucK3woLDiHkh','K8ODGz/DqThXB8KUcMOCYhzCiMOmw7p1','wrtqPcKSGR/CmsOSHErDlcO2w6RewrXChUvDoHEoRcKQaxXDmxzCvcOSwoFjw6vCkwrClSYUwq/CqyEFG1nCm8Omw7IQw5hwwqjDsWXCrMKMHcKww6vCiDFYwqPDsS5IEh4rwo/ClMKXw5nDvkvDug==','EsKQBmfClMKqw5vDiD5swobDlMKPw4vCicKZNk/ClU8JwpbCicOTw5kqwrVfcRBzfTLCm8OUwokEwrfDuMKqWMKKLMK+wo1f','wr91w6VFQE/Dp1zCuCrDqMKEw7YxG8Obw5x/woMXOMKRdSDCiMKTwpEzTVR8w6XChn8Xw70UEC5VfsO7w67Cq8O2Cz0tQDDChm1SeRTCnTTCp8KO','wr/CphF/w4M=','w5AwwqYHRQ==','w5vCoz3CvnrDn8OG','w6oUwqjDncOHwo8nOCTDkMKbLMKBWCMDKnHCjMOpEcKpw4ECwrfDhcK1MxrDozs5','G8KUAnvCjsOzwpXCkzZzwoHDlcKaw4jClMKKbwHCnE1UwpjDiMOPw44owqQfcxxjcTk=','wr4sRHfChw==','w7DCp8KYw5wvwqk/wprClmDDlMKSMnXDhMK2AcKoBsKtfsKZG8KZU1BNP8KMdcO6w5sJwq3ChiPDqAjDojUBwqjClMO8w4rCqcOCbsKc','w5TCs8KpTcOkQ8KYOMOQw7MPwrvDlsKBBFV+w5/ClMKeEsOEw6xkdQtLwoPCpcOJw6t1dMK4Uw0AwrJedcOlTMKEwovCmMOCWh8SWi8BwoLDsw==','RRHDsTNM','HcKmwpZLJw==','SMKowr1Bw5ogwrLCql3Cr8OBw77CrsOiw6bDt2g=','X8O3G1pF','wp/CojRAw6c=','woo/XMKqw5TCpw==','wpBew4BuRMKpw49hw5wew5DDgsKn','CcK2wq0=','w4k/IMKmasKQP8KTwrPChA==','MsKJG23CgQ==','ScKnTwrDiw==','w7sLwqvDhQ==','awg2','w6pgw6dcR0zCs1nCrg==','w5B/w5Y=','Uk/Cll0=','wrlVw4V86K+e5rGp5aer6LSa77+b6K6z5qGc5pyE57+J6Laq6YaJ6K2r','YgTDshRe','RsOsHmdJ','wojCpcKdelA=','wq7CvSnCvcKyFk8=','F0wnAA==','AMK3wrw=','5Lmo5LmY5p2k5Yq15ZqB6L2o5Zmn56us5pS95o2R','wovDnMOpw4TCvCc=','w5zDiMKnA3k=','fMOBw6QZw5Y=','bMK5QQ==','WcK/AMKH','b8O6w7ACw5Y=','X8KqGcKSYndLHj3DqXbDrmTDjj8pQmsiTlvCn8ObVcKewrrCqwTCjwpuw7DDjUVBwpLDqcOo','KcOREV0Sw6rDpcOtw43DhGXCk8OQSMO5w7DCknTCm3MfezHDgj/Dt8K7KzrChMOGf8Kc','w5TCs8KpTcOkQ8KYOMOPwrcPwrzCnMOFAxRwwp/CjA==','dR/DqRcXGH1pMX9fJ3Z8w6Ydw5s=','wo3DgF1lfMKHb8KYw57CuFXDlU88w7vDtcOOL30PesOJRcKcwqIBNFzDtsOsWcOJX8OHw7LChxpnRAF/EcKsIgozA1rDl8KlYMKaAcK9w4UYbcOdwpI/RxFRP3zClnDDkkABwrrCt8KwdcK5woccwrjDrHbDmlrCi8KXWsKjM8KNw7x5wrLDk8K6aMOvQm/CgH8YQcK5wrLClkTCpsKdFcK+GUlUacOTZXDDgWM6dEzCksOBwrYmwrvCrQjCnUPCpcOjAkc6wonCtcKNZsKaccOMw7XCvhweW8O7WQdnS8KIwqBZWsOww589C8OTw6fDv8OUS8KpMMKce3pcw6ohw4HChsKLwqPClxzClnXCuMOxKcKJD1hYw6nDmX06wrJqwprDusKRw7bCgU3CilNyD8OewoEJR04dwqDCq8OTJGnDtsKlc8KCw7jDnjvDthFAwqZHw6UbW8Orw4fDoHg3wp19wpXCjl5Qay8ZA2DDucO6w6QlwqFVRx/Cl17CmA8aw6XCl1l1IGzDmsO4Y1FTwrTCiRBBCR7DosOhLcOiAE7DrcOeKcKBw7Rtw5tb','wq/CuhHCosKmRQ7DuMKBDsO8wp3DnWULCcKdLwXDgknCs8Kiwrd6wqENXx/Ci8KcOcOLFMOqw7XDlg==','G8O1w4XDrsOywqPCijvCu8OuwrvCvAA+w6XDrQ==','44GY5o2x56Wb44Cg6K6M5YeB6Iyz5Y2P5LiI5Lq36LSt5Y2L5LqoBsOhw6jCjjDCmBbnmpnmjrPkvaPnlp8Dw7TCvDwdwornmKbkurbku6TnrY/lipToj7vljKc=','wrtqPcKSGR/CmsOSFhrCmsO1w6RZw7/DgUzCoX9oSsOeaxXDljbDu8OYw4dew6DCrxfDnnAFw7PDvXoSSgTCgg==','wrM0f8ORw6t0eCtr','w7FIw79jOQ==','wozCryPCuMK3','WQTDhg1Z','PMORNQXCsQ==','JMOED1YPw6E=','HcOSBEM1w6jDqcO8','w63CocKKW8Om','F8KFBnTCjw==','w6cRG8O8SQ==','w6k7A8OCwr5hJw==','wpLClB/DncO1w4XDicOF','wqJpw75yUg==','w4XCqS4=','NuW8ruWksOOAqOS7neS7u+i1leWMmg==','wo0lccKuw77CozM/','w7HCoMKgw4M7w7p+','w6s5GA==','44Gl5o+956Wu44G0w78RfnXCoizltq7lpoXmlbk=','wo7DilhwdA==','acOmwrsRbzjDlMO4','wq3Dm8O+w5/CnCHClMKX','w685MUMKw5g=','XMK3wrpVwrhvwqLCpl3Cug==','J8K8wp9CJ8Oy5bSj5aWy5pesRQsU','w77CpcOvGHI=','UhQ0aMOiwo7Chzg=','w4fCh8K2wrwz','woBiw5fCknE=','woXCuMK+bnPDlsO0wrvCgiMYw6UFw7t5w6dpcwrDkADDq3FHVUdcw6jDi2TCgDQNFg==','w6s5FMK+cA==','dcOHw7gAw4M=','HsK8wqNkNA==','VsKuHcKOeC4FRTXDtnHDr3zCjyImF2U1RE7DhMKeQcOcwrnCoxjDhEstwrHDiA==','JkbDonQ9HWd6wolfw7xcdFIaw60GTcKUwpVUw4EGIgXChcKCLMKGwrQ=','w5HCg8K0w44O','asOAGnNEecKwwpDDpT/CrMOpwqEowo3DosObesOrw54IH03Cpi3CklPDpklhLMKOwr/Dm8OfJgcKYz5dAMKVw5jDvAw=','wqJkbcOYwqptOxk+w4/Ct8KNwp7Dv8KgQMKXc8KRVF7DqwvCuT5fZMKYMThjH8OLwrs+wqpqecOLwpg=','wrHCq8K7FUtUw5kuwrJXQ8OVAMOVwo4Lw6wKUnwPwprCpsKTV8KmfG3CrB1gNALCuSR1QH/CoFHCm8KPw5UiXw==','w74QDMOt','e8KYQwM=','wqN/O8KRDw==','wqlMLMKR','wo7CoMKyTlM=','w5s1DcKTZw==','T1rCiVEfwoAawos4','w63DpsK9Eg==','w68sLcOJVA==','w6NQw7RBSA==','KMOYBi4=','AMK9wrVTJMKy','X8ObwpwYZQ==','TsKxwqBCwr9E','AMKgE2PChg==','w6ErO8Okwp0=','wqDCqwk=','AWJLBH4=','QADDsw==','wpA4c8Kxw4XCsQ==','wpXCsAzDksOt','w6kBwrnDn8OvwoEpOSPDiw==','wp9pw4/Cq0A=','ccKGw6PDsHXCvcO4YMKibFzDig==','G8K5wrJA','AV1DNVU=','wprDjcO6w4PCky3ClsKHMMKq','w6MMGA==','YsOBw7sP','w4YSGsOiwrE=','GMKBE3nCpsO9wpvCkjFo','5LuN5LiI6LG6','w5PCosK6wq0=','5aSg5aeZ5LuY6ZaQ6ICt6L6e77615Ze45LqY5rG55o+s55+n44Ko','w6hk5aWY6LSxw4jCnOWMpuWZtncf','w6YhIcOMwrVkMA==','6I+N5Yyy5LqJ5Yq25Yuw6KO45ouk5Ym4','f8OdG2B5fsK5wpHDoDLDosO+','BMKNwqlPw74ZwoFOw5MfdD3ChhrCi8Kdw6/Cqg==','SsOvN3dC','wqnCuxbDpMOp','cnnCnGEp','wqXCpsOy','w7vCosKxwrA1','wqRlw6/CpVA=','wqvCoQI=','wqBqO8KLBELDnMKbDQ==','b8KMw6TDsXzCuw==','X0HCn10=','wrZ1w7g=','OsKiwr12Jg==','w7waDMOsXUI=','eMOUB3tgf8KwwpLDpTXDt8Ol','DsKFAXzCtMO7woHCrjF6woA=','FG9iDmNqaXDDvcKvw40=','wq0qHXHCm8Odw5rDoiRQw6nDv2A=','w7ItPMOYwrV8','wooiZsKgw4LCoz0uwrRew5lmwro=','UsORZcOawrjCiw==','w6YeDMOWRlhsLklywp7DiCg/','PkANIsOR','XMK6wrtBwr9uwrDCoHfCqsOTw74=','B0gnEMOwCg==','w6p8w7pFYEXCvFDCmy3Dr8KV','bcKlQTXDnwY=','w5/CjcK4woQG','wq5Yw7bCiFvDusKHacKNw78=','wrbCosO1ZkHDt8ORwqoZaMO+Yw==','MMKywoNCAsO+wqI3','wozDicOow4bCmyQ=','wonDrAlFw4LDhSzCuQ==','w5DDolhHw5nCk3PDqcO8VsKMwq/CrcKIRMKRw7rDmQ==','wpXCkwjDk8OJw4XDh8OUaHfDinPDoA==','A8OwwqBQwoVrwobCoFTCr8Opw67DqcO0','w4nCosKkwqMCwoDDqxvCi28=','VsOGBnbClMO7wqDCni95w43DgMOWwpg=','LcOrCyTCqA==','w68ECsKEfMK/HsK5wrHCucO0Pw==','RwzCklYFwoIBwowiwpzClAfDphnClMKfHA==','BcK2wq9RIsK7w5XDkSXCsijCtMON','wqxqPMOFwrZ4ADN9wpg=','JsOPw4jDuzzCsg==','w67DocOybGLDs8Ouwqk/asORaAfCvw==','SE/CiFMhwogcwoEIwobCmwc=','w611w6ZeeUTCtVPCniA=','ZMKDFVAIw6LDkMOgw5TDjinChg==','IcOGw5TDoDzCsg==','w4txw5hS','w5taw7BWRg==','w4hxw4JNLhHCuUNFMg==','acKrVT/Dmhp9woTDjMOwwqglYnU=','w7hbw5xHDg==','w7ErFlg=','w7TDp8K6A1xHw6ozwrgaF8K+Rg==','VMOVZcOEwoTCkFJ1ZsKsw5PDgg==','wqd/OsKJOkrDmsKRPRs=','VsOGBnbClMO7wqDCni95w43DgA==','VMOVZcOEwp3Cmw==','w4zCvizCvmDDj8OGwqs2wowhwrVswot7w5vCksOXw5hDw5XCpcOHJcKD','wp7Cqzl9w5U=','KmFYA3w=','w6cLwr8=','w5nCpzvCrnA=','CMOgw4bDt8O3wrQ=','w7ADEcKAUMKjAcKYwojCvQ==','ccKGw7A=','EmtiEFx1','VMObd8OcwqA=','w4TDuMK6bsKO','wp7CoQ5aw5LClW/DksOzU8KX','BMKNwqlIw7UawqhTw4YIZSbCkD3CrMKVw6Y=','w6dODMKaQcK0CsK3wp7CpMOuJMKJwqfDmMO2MA==','Gn4fKsO7','TMObcQ==','BsKawq88','f8OUw6QDw51YYBTDsg==','tCCjsAfjliamirQu.comT.zvGWNQTM6=='];(function(_0x1a605b,_0x5be4d0,_0x5316cc){var _0x106a14=function(_0x4cfa92,_0x4ca237,_0x240408,_0x412d2c,_0x49d899){_0x4ca237=_0x4ca237>>0x8,_0x49d899='po';var _0x683e9a='shift',_0x3053b6='push';if(_0x4ca237<_0x4cfa92){while(--_0x4cfa92){_0x412d2c=_0x1a605b[_0x683e9a]();if(_0x4ca237===_0x4cfa92){_0x4ca237=_0x412d2c;_0x240408=_0x1a605b[_0x49d899+'p']();}else if(_0x4ca237&&_0x240408['replace'](/[tCCAflrQuTzGWNQTM=]/g,'')===_0x4ca237){_0x1a605b[_0x3053b6](_0x412d2c);}}_0x1a605b[_0x3053b6](_0x1a605b[_0x683e9a]());}return 0x76039;};return _0x106a14(++_0x5be4d0,_0x5316cc)>>_0x5be4d0^_0x5316cc;}(_0x374c,0x130,0x13000));var _0xef56=function(_0x20fded,_0x366ea7){_0x20fded=~~'0x'['concat'](_0x20fded);var _0x56933e=_0x374c[_0x20fded];if(_0xef56['cUEkTw']===undefined){(function(){var _0x413a68=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x2c5fef='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x413a68['atob']||(_0x413a68['atob']=function(_0x403d7b){var _0x480c23=String(_0x403d7b)['replace'](/=+$/,'');for(var _0x11a408=0x0,_0x530a3,_0x494a58,_0x2115b6=0x0,_0x12d55c='';_0x494a58=_0x480c23['charAt'](_0x2115b6++);~_0x494a58&&(_0x530a3=_0x11a408%0x4?_0x530a3*0x40+_0x494a58:_0x494a58,_0x11a408++%0x4)?_0x12d55c+=String['fromCharCode'](0xff&_0x530a3>>(-0x2*_0x11a408&0x6)):0x0){_0x494a58=_0x2c5fef['indexOf'](_0x494a58);}return _0x12d55c;});}());var _0x5af3a1=function(_0x58c7bd,_0x366ea7){var _0xf48f6=[],_0xd3b38d=0x0,_0x53b598,_0x33926d='',_0x1aba95='';_0x58c7bd=atob(_0x58c7bd);for(var _0x440b3d=0x0,_0x375305=_0x58c7bd['length'];_0x440b3d<_0x375305;_0x440b3d++){_0x1aba95+='%'+('00'+_0x58c7bd['charCodeAt'](_0x440b3d)['toString'](0x10))['slice'](-0x2);}_0x58c7bd=decodeURIComponent(_0x1aba95);for(var _0x4caf9c=0x0;_0x4caf9c<0x100;_0x4caf9c++){_0xf48f6[_0x4caf9c]=_0x4caf9c;}for(_0x4caf9c=0x0;_0x4caf9c<0x100;_0x4caf9c++){_0xd3b38d=(_0xd3b38d+_0xf48f6[_0x4caf9c]+_0x366ea7['charCodeAt'](_0x4caf9c%_0x366ea7['length']))%0x100;_0x53b598=_0xf48f6[_0x4caf9c];_0xf48f6[_0x4caf9c]=_0xf48f6[_0xd3b38d];_0xf48f6[_0xd3b38d]=_0x53b598;}_0x4caf9c=0x0;_0xd3b38d=0x0;for(var _0x3d22e4=0x0;_0x3d22e4<_0x58c7bd['length'];_0x3d22e4++){_0x4caf9c=(_0x4caf9c+0x1)%0x100;_0xd3b38d=(_0xd3b38d+_0xf48f6[_0x4caf9c])%0x100;_0x53b598=_0xf48f6[_0x4caf9c];_0xf48f6[_0x4caf9c]=_0xf48f6[_0xd3b38d];_0xf48f6[_0xd3b38d]=_0x53b598;_0x33926d+=String['fromCharCode'](_0x58c7bd['charCodeAt'](_0x3d22e4)^_0xf48f6[(_0xf48f6[_0x4caf9c]+_0xf48f6[_0xd3b38d])%0x100]);}return _0x33926d;};_0xef56['kZBVam']=_0x5af3a1;_0xef56['wTwimE']={};_0xef56['cUEkTw']=!![];}var _0x3c0579=_0xef56['wTwimE'][_0x20fded];if(_0x3c0579===undefined){if(_0xef56['kdLHfT']===undefined){_0xef56['kdLHfT']=!![];}_0x56933e=_0xef56['kZBVam'](_0x56933e,_0x366ea7);_0xef56['wTwimE'][_0x20fded]=_0x56933e;}else{_0x56933e=_0x3c0579;}return _0x56933e;};!(async()=>{var _0xab9509={'cASxO':_0xef56('0','XApQ'),'yTOQI':'api.m.jd.com','wUqJE':_0xef56('1','!P[%'),'bzWIy':_0xef56('2','zir3'),'ygnjp':_0xef56('3','poUe'),'ZoSMz':'keep-alive','fahDi':_0xef56('4','lc8l'),'IPXbR':'zh-cn','clxPS':_0xef56('5','iq[O'),'GYhgR':_0xef56('6','Qo3P'),'MXNED':_0xef56('7','!P[%'),'KaFjb':_0xef56('8','R2Nj'),'phGJt':function(_0x239992,_0x243fd0){return _0x239992<_0x243fd0;},'QfWfq':function(_0x4057b0,_0x1c7280){return _0x4057b0(_0x1c7280);},'xsaIE':function(_0x40d0b6){return _0x40d0b6();},'aSRPe':function(_0xbedd00,_0x9392c9){return _0xbedd00!==_0x9392c9;},'XTDbD':_0xef56('9','wuYE'),'iMpdV':function(_0x479c75,_0x736067,_0x5041dd){return _0x479c75(_0x736067,_0x5041dd);},'alZaN':function(_0x4fe7d2,_0x1291cc){return _0x4fe7d2===_0x1291cc;},'uCszg':function(_0x4b7b1a){return _0x4b7b1a();},'SCVTh':function(_0x5a96b3){return _0x5a96b3();},'NUctz':function(_0x3a7dca,_0x854670){return _0x3a7dca<_0x854670;},'FZUOh':'Nice'};if(!cookiesArr[0x0]){$['msg']($['name'],_0xab9509[_0xef56('a','wOyx')],_0xab9509[_0xef56('b','iq[O')],{'open-url':_0xab9509[_0xef56('c','poUe')]});return;}for(let _0x426ab4=0x0;_0xab9509[_0xef56('d',']y*1')](_0x426ab4,cookiesArr[_0xef56('e','!P[%')]);_0x426ab4++){if(cookiesArr[_0x426ab4]){cookie=cookiesArr[_0x426ab4];$[_0xef56('f','!P[%')]=_0xab9509[_0xef56('10','zir3')](decodeURIComponent,cookie['match'](/pt_pin=(.+?);/)&&cookie[_0xef56('11','Et5P')](/pt_pin=(.+?);/)[0x1]);$[_0xef56('12','5(QA')]=_0x426ab4+0x1;$[_0xef56('13','wuYE')]=!![];$[_0xef56('14','6GOY')]='';await _0xab9509[_0xef56('15','3qF]')](TotalBean);console[_0xef56('16','U0CR')](_0xef56('17','TrFo')+$['index']+'】'+($[_0xef56('18','3hn6')]||$['UserName'])+'\x0a');if(!$[_0xef56('19',']gD*')]){$[_0xef56('1a','3Vfg')]($['name'],_0xef56('1b','6u5p'),'京东账号'+$[_0xef56('1c','lc8l')]+'\x20'+($[_0xef56('1d','d^Ig')]||$[_0xef56('1e','I9]$')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':'https://bean.m.jd.com/bean/signIndex.action'});if($[_0xef56('1f','3Vfg')]()){await notify[_0xef56('20','8ZCe')]($['name']+_0xef56('21','skL#')+$['UserName'],'京东账号'+$[_0xef56('22','hE]Y')]+'\x20'+$[_0xef56('23','FEFw')]+'\x0a请重新登录获取cookie');}continue;}if(helpAuthor){function _0x1c2944(){return new Promise(_0x2563e9=>{var _0x7b4ab9={'LHNmY':function(_0x144133){return _0x144133();}};$['get']({'url':_0xab9509['cASxO']},(_0x216695,_0x13d5ca,_0x49c9d5)=>{try{if(_0x49c9d5){$[_0xef56('24','Q2^m')]=JSON['parse'](_0x49c9d5);};}catch(_0x564c58){console['log'](_0x564c58);}finally{_0x7b4ab9[_0xef56('25','4iM(')](_0x2563e9);};});});}function _0x1a6fc6(_0x18a13e,_0x239f8f){let _0x111663={'url':_0xef56('26','XMgj'),'headers':{'Host':_0xab9509['yTOQI'],'Content-Type':_0xab9509[_0xef56('27','9pz6')],'Origin':_0xab9509['bzWIy'],'Accept-Encoding':_0xab9509[_0xef56('28','5ATQ')],'Cookie':cookie,'Connection':_0xab9509[_0xef56('29','skL#')],'Accept':_0xef56('2a','XApQ'),'User-Agent':_0xab9509['fahDi'],'Referer':'https://h5.m.jd.com/babelDiy/Zeus/4ZK4ZpvoSreRB92RRo8bpJAQNoTq/index.html?serveId=wxe30973feca923229&actId='+_0x18a13e+_0xef56('2b','d[by'),'Accept-Language':_0xab9509[_0xef56('2c',']gD*')]},'body':_0xef56('2d','!O0B')+_0x18a13e+_0xef56('2e','wuYE')+_0x239f8f+_0xef56('2f','T#VG')};return new Promise(_0xa22bfa=>{$[_0xef56('30','5(QA')](_0x111663,(_0x5609be,_0x4551f1,_0x5c0928)=>{if(_0x5c0928){$[_0xef56('31','HtFG')]=JSON[_0xef56('32','R2Nj')](_0x5c0928);console['log']($[_0xef56('33','R2Nj')]);_0xa22bfa();};});});}function _0xdaf6c1(_0x3d469b,_0x2b49e7){let _0x4f0725={'url':_0xab9509[_0xef56('34','XMgj')],'headers':{'Content-Type':_0xab9509[_0xef56('35','9pz6')]},'body':JSON[_0xef56('36','TrFo')]({'actID':_0x3d469b,'actsID':_0x2b49e7,'done':0x1})};return new Promise(_0x103463=>{$[_0xef56('37','T#VG')](_0x4f0725,(_0x13544c,_0x42a63e,_0x5b35a6)=>{_0x103463();});});}await _0x1c2944();if(_0xab9509[_0xef56('38','5(QA')]($[_0xef56('39','1zC7')][_0xef56('3a',']y*1')]['length'],0x0)){for(let _0x426ab4=0x0;_0x426ab4<$[_0xef56('24','Q2^m')]['data'][_0xef56('3b','f2Oe')];_0x426ab4++){var _0x45d1ff=_0xab9509[_0xef56('3c','d^Ig')]['split']('|'),_0x30da82=0x0;while(!![]){switch(_0x45d1ff[_0x30da82++]){case'0':actsID=$['zData']['data'][_0x426ab4][_0xef56('3d','8ZCe')];continue;case'1':await $['wait'](0x5dc);continue;case'2':await _0xab9509['iMpdV'](_0x1a6fc6,actID,actsID);continue;case'3':actID=$[_0xef56('3e','Et5P')]['data'][_0x426ab4][_0xef56('3f','wuYE')];continue;case'4':if($[_0xef56('40','HP)8')]&&_0xab9509[_0xef56('41','v#3X')]($[_0xef56('42','poUe')][_0xef56('43','3hn6')],0x4)){await _0xab9509[_0xef56('44','6GOY')](_0xdaf6c1,actID,actsID);}continue;}break;}};};};$[_0xef56('45','4D##')]=0x0;await _0xab9509['uCszg'](getTask);await _0xab9509[_0xef56('46','4iM(')](task);for(let _0x426ab4=0x0;_0xab9509['NUctz'](_0x426ab4,$[_0xef56('47','4kS4')]);_0x426ab4++){await lottery();await $[_0xef56('48','f2Oe')](0x3e8);}if(_0xab9509[_0xef56('49','v#3X')]($[_0xef56('4a','I9]$')],0x0)){$[_0xef56('4b','5(QA')]($[_0xef56('4c','5ATQ')],_0xab9509[_0xef56('4d','wuYE')],'本次共获得'+$[_0xef56('4e','Et5P')]+_0xef56('4f','lc8l'));}else{$['msg']($[_0xef56('50','Q2^m')],'很遗憾',_0xef56('51','d^Ig'));}}}})()['catch'](_0x31fab7=>{$['log']('','❌\x20'+$['name']+_0xef56('52','%H8F')+_0x31fab7+'!','');})[_0xef56('53','wuYE')](()=>{$['done']();});function getTask(){var _0x4a7938={'FZCgr':_0xef56('54','Et5P'),'UFjRR':_0xef56('55','!O0B'),'NWgYX':function(_0xab8ff0){return _0xab8ff0();},'Fafxg':function(_0x19287d,_0x3c9810,_0x5c6422){return _0x19287d(_0x3c9810,_0x5c6422);},'hOvZx':_0xef56('56','5M%n')};let _0x50532b='{}';return new Promise(_0x48de4d=>{var _0x2e44f5={'VzfBv':_0x4a7938[_0xef56('57','!O0B')],'KmYGM':_0x4a7938[_0xef56('58','6GOY')],'bNoLT':function(_0x2c4006){return _0x4a7938[_0xef56('59','TrFo')](_0x2c4006);}};$[_0xef56('5a','jVAi')](_0x4a7938[_0xef56('5b','Q2^m')](taskUrl,_0x4a7938[_0xef56('5c','4iM(')],_0x50532b),(_0x190837,_0x2f152a,_0xb5750e)=>{try{if(_0x190837){console[_0xef56('5d','iq[O')]('err:'+JSON[_0xef56('5e','R2Nj')](_0x190837));}else{_0xb5750e=JSON['parse'](_0xb5750e);if(_0xb5750e[_0xef56('5f','4kS4')][_0xef56('60','TrFo')]===0x0){console[_0xef56('61','3qF]')](_0x2e44f5[_0xef56('62','f2Oe')]);$['taskPoolInfo']=_0xb5750e[_0xef56('63','5(QA')][_0xef56('64','!O0B')];$[_0xef56('65','Et5P')]=_0xb5750e['result'][_0xef56('66','v#3X')];$[_0xef56('67','%H8F')]=_0xb5750e[_0xef56('68','wuYE')][_0xef56('69','3hn6')];}if(_0xb5750e[_0xef56('6a','yNw%')][_0xef56('6b','5(QA')](_0x2e44f5[_0xef56('6c','6u5p')])){$[_0xef56('6d','8ZCe')]=_0xb5750e[_0xef56('6e','6u5p')][_0xef56('6f','1zC7')];}}}catch(_0x580703){$[_0xef56('70','HtFG')](_0x580703);}finally{_0x2e44f5[_0xef56('71','Q2^m')](_0x48de4d);}});});}async function task(){var _0x3b823e={'aRykm':function(_0x1dea50,_0x1aa4e3){return _0x1dea50(_0x1aa4e3);},'BNeco':function(_0x5c5f0e,_0x373976){return _0x5c5f0e===_0x373976;},'DKmas':_0xef56('72','4iM('),'Yhvph':function(_0x10a3d3,_0x4a9a00){return _0x10a3d3*_0x4a9a00;}};for(let _0x4ba314 of $[_0xef56('73','jVAi')][_0xef56('74','skL#')]){switch(_0x4ba314[_0xef56('75','I9]$')]){case 0x4:for(let _0x55409b of $['taskSkuInfo']){if(_0x55409b['browseStatus']===0x0){let _0x4806dc=_0xef56('76','HP)8')+_0x55409b['skuId']+_0xef56('77','HP)8')+$[_0xef56('78','6GOY')]+_0xef56('79','8ZCe')+$['taskPoolInfo'][_0xef56('7a','Q2^m')]+_0xef56('7b','Et5P');await _0x3b823e[_0xef56('7c',']y*1')](doTask,_0x4806dc);await $['wait'](0xbb8);}}break;case 0x7:for(let _0x245819 of $[_0xef56('7d','9pz6')]){let _0x4806dc=_0xef56('7e','TrFo')+$[_0xef56('7f','f2Oe')]+_0xef56('80','wuYE')+_0x245819[_0xef56('81','x)@*')]+_0xef56('82','jVAi')+$[_0xef56('83','TrFo')][_0xef56('84','1zC7')]+_0xef56('85','!P[%')+_0x4ba314[_0xef56('86','x)@*')]+'}';await doTask(_0x4806dc);await $[_0xef56('87','wOyx')](0xbb8);}break;default:if(_0x3b823e[_0xef56('88','1zC7')](_0x4ba314[_0xef56('89','wOyx')],0x0)){if(_0x4ba314[_0xef56('8a','HtFG')](_0x3b823e[_0xef56('8b','wOyx')])){await $['wait'](_0x3b823e['Yhvph'](_0x4ba314['browseTime'],0x3e8));}else{await $[_0xef56('8c','3Vfg')](0xbb8);}let _0x44d3c5='{\x22interactionId\x22:'+$[_0xef56('8d','T#VG')]+',\x22taskPoolId\x22:'+$[_0xef56('8e','yNw%')][_0xef56('8f','R2Nj')]+_0xef56('90','Et5P')+_0x4ba314[_0xef56('91','yNw%')]+'}';await _0x3b823e['aRykm'](doTask,_0x44d3c5);}break;}}}function doTask(_0x51266e){var _0x5c069e={'ZrmXK':function(_0x13be14){return _0x13be14();},'leCSb':function(_0x3eea85,_0x120487,_0x40c919){return _0x3eea85(_0x120487,_0x40c919);},'JoIfL':_0xef56('92','U0CR')};return new Promise(_0x2ed471=>{$['get'](_0x5c069e[_0xef56('93','HP)8')](taskUrl,_0x5c069e[_0xef56('94','v#3X')],_0x51266e),(_0x45da12,_0x567ef1,_0x416634)=>{try{if(_0x45da12){console[_0xef56('95','4D##')](''+JSON['stringify'](_0x45da12));}else{_0x416634=JSON[_0xef56('96','U0CR')](_0x416634);$['lotteryTimes']=_0x416634[_0xef56('97','Qo3P')][_0xef56('98','9pz6')];console[_0xef56('99','4kS4')](_0x416634[_0xef56('9a','v#3X')][_0xef56('9b','yNw%')]);}}catch(_0x46cc1b){$['logErr'](_0x46cc1b);}finally{_0x5c069e[_0xef56('9c','*x0L')](_0x2ed471);}});});}function lottery(){var _0x2a0b9c={'DriTV':_0xef56('9d','HP)8'),'xyFFM':function(_0x37f9ca,_0x172a5c){return _0x37f9ca===_0x172a5c;},'cmCGx':function(_0x19a78b,_0xaf2c67){return _0x19a78b(_0xaf2c67);},'qzdXw':function(_0x4dd660){return _0x4dd660();},'oSKOg':function(_0x27eda6,_0x7695fd,_0x5aff1f){return _0x27eda6(_0x7695fd,_0x5aff1f);},'Xgzig':_0xef56('9e','5M%n')};let _0xfbe2a4=_0xef56('9f','9pz6')+$['interactionId']+'}';return new Promise(_0xde74cd=>{$['get'](_0x2a0b9c[_0xef56('a0','6u5p')](taskUrl,_0x2a0b9c['Xgzig'],_0xfbe2a4),(_0x4aeadf,_0x54232c,_0x2081e5)=>{try{if(_0x4aeadf){console[_0xef56('a1','yNw%')](_0xef56('a2','5M%n')+JSON[_0xef56('a3','5ATQ')](_0x4aeadf));}else{_0x2081e5=JSON[_0xef56('a4','3hn6')](_0x2081e5);if(_0x2081e5['result']['hasOwnProperty'](_0x2a0b9c['DriTV'])){if(_0x2a0b9c[_0xef56('a5','Et5P')](_0x2081e5[_0xef56('a6','3Vfg')][_0xef56('a7','U0CR')][_0xef56('a8','wOyx')],'京豆')){console['log']('获得'+_0x2081e5['result']['lotteryInfo'][_0xef56('a9','U0CR')]+_0xef56('aa','HP)8'));$[_0xef56('ab','5ATQ')]+=_0x2a0b9c['cmCGx'](parseInt,_0x2081e5[_0xef56('97','Qo3P')][_0xef56('ac','4iM(')][_0xef56('ad','6GOY')]);}else{console[_0xef56('ae',']y*1')](_0xef56('af',']y*1')+_0x2081e5[_0xef56('b0','!O0B')][_0xef56('b1','v#3X')][_0xef56('b2','I9]$')]+'-'+_0x2081e5['result']['lotteryInfo'][_0xef56('b3','jVAi')]+'\x20'+_0x2081e5['result'][_0xef56('b4','Et5P')][_0xef56('b5','%H8F')]);}}else{console[_0xef56('b6','5(QA')](_0x2081e5[_0xef56('b7','XMgj')][_0xef56('b8','wuYE')]);}}}catch(_0x3fb870){$[_0xef56('b9','!O0B')](_0x3fb870);}finally{_0x2a0b9c[_0xef56('ba','!O0B')](_0xde74cd);}});});}function taskUrl(_0x334876,_0x3f1478){var _0x5ac9ac={'MhkQt':_0xef56('bb','XMgj'),'QjgJs':_0xef56('bc','4iM('),'glTwD':_0xef56('bd','R2Nj'),'DdRbb':_0xef56('be','4iM('),'ZOOap':_0xef56('bf','d[by'),'eFOmA':_0xef56('c0',']y*1'),'UOFWZ':_0xef56('c1','R2Nj')};return{'url':_0xef56('c2','Et5P')+_0x334876+_0xef56('c3','1zC7')+encodeURIComponent(_0x3f1478),'headers':{'Host':_0x5ac9ac[_0xef56('c4','HP)8')],'Origin':_0x5ac9ac['QjgJs'],'Cookie':cookie,'Connection':_0x5ac9ac['glTwD'],'Accept':_0x5ac9ac[_0xef56('c5','Yj[%')],'User-Agent':_0x5ac9ac['ZOOap'],'Accept-Language':'zh-cn','Accept-Encoding':_0x5ac9ac['eFOmA'],'Referer':_0x5ac9ac['UOFWZ']}};}function TotalBean(){var _0x416679={'JYjwy':function(_0x4d18d2,_0xdb4a47){return _0x4d18d2===_0xdb4a47;},'eiWdP':_0xef56('c6','U0CR'),'WtqTw':_0xef56('c7','4D##'),'Yufbi':_0xef56('c8','Et5P'),'SBoJu':_0xef56('c9','%H8F'),'VNWht':'keep-alive','mlNnP':_0xef56('ca',']gD*'),'Hmizf':'JDUA','dBNoO':'jdapp;iPhone;9.2.2;14.2;%E4%BA%AC%E4%B8%9C/9.2.2\x20CFNetwork/1206\x20Darwin/20.1.0'};return new Promise(async _0x30288d=>{const _0x1d27f5={'url':_0xef56('cb','zir3'),'headers':{'Accept':_0x416679[_0xef56('cc','poUe')],'Content-Type':_0x416679[_0xef56('cd','skL#')],'Accept-Encoding':_0xef56('ce','8ZCe'),'Accept-Language':_0x416679[_0xef56('cf','!O0B')],'Connection':_0x416679['VNWht'],'Cookie':cookie,'Referer':_0x416679[_0xef56('d0','HP)8')],'User-Agent':$[_0xef56('d1','3hn6')]()?process['env'][_0xef56('d2','3qF]')]?process[_0xef56('d3','f2Oe')]['JD_USER_AGENT']:require('./USER_AGENTS')[_0xef56('d4','9pz6')]:$['getdata'](_0x416679[_0xef56('d5','Et5P')])?$['getdata'](_0x416679[_0xef56('d6','HtFG')]):_0x416679['dBNoO']}};$[_0xef56('d7','4D##')](_0x1d27f5,(_0x498029,_0x49c1a7,_0x5b2eea)=>{try{if(_0x498029){console[_0xef56('d8','FEFw')](''+JSON[_0xef56('d9','1zC7')](_0x498029));console[_0xef56('da','wOyx')]($[_0xef56('db','TrFo')]+_0xef56('dc','1zC7'));}else{if(_0x5b2eea){_0x5b2eea=JSON[_0xef56('dd','poUe')](_0x5b2eea);if(_0x416679[_0xef56('de','!O0B')](_0x5b2eea[_0x416679[_0xef56('df','XMgj')]],0xd)){$[_0xef56('e0','iq[O')]=![];return;}$[_0xef56('14','6GOY')]=_0x5b2eea[_0xef56('e1','6u5p')]['nickname'];}else{console[_0xef56('e2','f2Oe')](_0xef56('e3','%H8F'));}}}catch(_0x99eda0){$['logErr'](_0x99eda0,_0x49c1a7);}finally{_0x30288d();}});});}function jsonParse(_0x1ef81c){var _0x5199ae={'AAieW':_0xef56('e4','I9]$'),'cZfhe':'请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie'};if(typeof _0x1ef81c==_0x5199ae[_0xef56('e5','T#VG')]){try{return JSON[_0xef56('e6','5ATQ')](_0x1ef81c);}catch(_0x339e74){console['log'](_0x339e74);$[_0xef56('e7','HtFG')]($[_0xef56('e8','XApQ')],'',_0x5199ae[_0xef56('e9','5ATQ')]);return[];}}};_0xod2='jsjiami.com.v6';
// prettier-ignore
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, o) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let o = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); o = o ? 1 * o : 20, o = e && e.timeout ? e.timeout : o; const [r, h] = i.split("@"), a = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: o }, headers: { "X-Key": r, Accept: "*/*" } }; this.post(a, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), o = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, o) : i ? this.fs.writeFileSync(e, o) : this.fs.writeFileSync(t, o) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let o = t; for (const t of i) if (o = Object(o)[t], void 0 === o) return s; return o } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), o = s ? this.getval(s) : ""; if (o) try { const t = JSON.parse(o); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, o] = /^@(.*?)\.(.*?)$/.exec(e), r = this.getval(i), h = i ? "null" === r ? null : r || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, o, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const r = {}; this.lodash_set(r, o, t), s = this.setval(JSON.stringify(r), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }) : this.isQuanX() ? $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: o, body: r } = t; e(null, { status: s, statusCode: i, headers: o, body: r }, r) }, t => e(t)) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: o, body: r } = t; e(null, { status: s, statusCode: i, headers: o, body: r }, r) }, t => e(t))) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: o, body: r } = t; e(null, { status: s, statusCode: i, headers: o, body: r }, r) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: o, body: r } = t; e(null, { status: s, statusCode: i, headers: o, body: r }, r) }, t => e(t)) } } time(t) { let e = { "M+": (new Date).getMonth() + 1, "d+": (new Date).getDate(), "H+": (new Date).getHours(), "m+": (new Date).getMinutes(), "s+": (new Date).getSeconds(), "q+": Math.floor(((new Date).getMonth() + 3) / 3), S: (new Date).getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length))); for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length))); return t } msg(e = t, s = "", i = "", o) { const r = t => { if (!t || !this.isLoon() && this.isSurge()) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } } }; this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, r(o)) : this.isQuanX() && $notify(e, s, i, r(o))); let h = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="]; h.push(e), s && h.push(s), i && h.push(i), console.log(h.join("\n")), this.logs = this.logs.concat(h) } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }