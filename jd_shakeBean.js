/*
    京东会员-摇京豆
    活动入口：京东app-我的-京东会员-摇京豆
    脚本功能 本地用户循环助力并抽奖，脚本无任何别的内置助力。
    适合node环境多账户使用，如仅一个账户就不需要运行这个脚本了。
    每月运行一次即可

    新手写脚本，难免有bug，能用且用。
    ============Quantumultx===============
    [task_local]
    #京东会员-摇京豆
    3 10 1 * * https://raw.githubusercontent.com/i-chenzhe/qx/main/jd_shakeBean.js, tag=京东会员-摇京豆,  enabled=true
*/
const $ = Env("京东会员-摇一摇");
const jdCookieNode = $.isNode() ? require("./jdCookie.js") : "";
const notify = $.isNode() ? require("./sendNotify") : "";
let cookiesArr = [], cookie = "", message = '', helpList = [];
if ($.isNode()) {
    Object.keys(jdCookieNode).forEach((item) => {
        cookiesArr.push(jdCookieNode[item]);
    });
} else {
    let cookiesData = $.getdata("CookiesJD") || "[]";
    cookiesData = JSON.parse(cookiesData);
    cookiesArr = cookiesData.map((item) => item.cookie);
    cookiesArr.reverse();
    cookiesArr.push(...[$.getdata("CookieJD2"), $.getdata("CookieJD")]);
    cookiesArr.reverse();
    cookiesArr = cookiesArr.filter((item) => !!item);
}
 var _0xodM='jsjiami.com.v6',_0xe9bc=[_0xodM,'C8KPw4DCig==','5LuQ5LmR6Leb5Y2b','H8OUw4MMw4Q=','G+iugemGteaXguebu+W9ueiOk+WPl33CjEhUM8KA','C8Ohwqh/Sw==','wrl+csOAAg==','wpI1U8KM','BsOcNXXCtzt5','wokxVMKfwpnDrA==','esKscz7CjQDCoWM=','QsK+Yi/Cqw==','w48Hw7nCqMOD','wrXCqMOPUMOW','PMKfwpMkTcOCTQ==','w7s8w4HDpcOwbMO7wqE=','w73CvcOj','N13Dl8Knw4pgY8Kg','w7LDusKxw5fCrwTClSs=','MeW9tuWms+aLj+WnlgwOKzTDiQ0VcMOPLsOP','CMKdw4o=','QcK+eyk=','GcKQw54tMA==','w7/Cu8OnwoEuwqvDkSs=','UeivhemEiOaUveeag+W8suiNhuWOrnTCihc+w57CoBnDihfDpgQ5IsKaeybCtX1yXCrCoMKlwoDCrMK8LsO7w4LDksKtfgnCk8KXLsKqw6bDuB/CmhYaHw==','e0DDhCPDsQ==','w5oGw7PCgklo','Gy3CpWE=','5Lug5Lq96Lac5Y28','AMKfwro5ZMOKTgs=','wp/orqLpha/mlL7nm4XlvZjojKHljJJpw51Owp4/wrA=','PWHDvsK0w6U=','w5DDtB/DsmEbGsOUUmjCtcOhw7Z0w44mwrPCqD9sFg==','e0LDvyLDpg==','ecK1birCjw==','CQbDuhVT','IsOGw4kmOyfCqMO+DcOkYTvCtCTDg8Krwo7DtCgBXkMuw6c=','SD3CjcO5Iw==','TMOfSMKW','wqXDvsODfQU=','w6/oj6Plvq3DmA==','HwrDth0=','b8KEw6ABAQ==','RsKsWCPCpwQ=','ES3CgkhC','G8OJw4A=','w70lcMOL','NsKNwqsoQg==','w6XDrVVh','P13DmsKtw6htdw==','w7DCscOwwoMWwqPDiDdCwo4gwo0uC8KyUGgcw5g=','L8OOw4/Du8KCP1QJw5LDjA==','6KO/5YiZ5Yi76IGT5Y6v6bqa5Lmb','5Lmg5LqM6L2z5ZuG5Lu756mG5pS/5o2e','w7N/YwHCtsOjw6cMU8OLw6oq','Q8OWBEZ0w4DCk8KmOzIgNXIjwrkrw4QDfMKTE8KL','wo4xX8KIw4DDpcK5BS3ChA==','QcOGEUZ3w4HDlcOZIDY7OT9zw6cxwoBXacOBSMOIwq4Rw4kVKw5VwrHDh8OSP8OZQmHCq8KhFmTDtMKiQsORVwTDq8Ouw7wHw5Zrw5zDmyo+woUkMcKwUx9PwpLCh8O3Y0nCjcKPDDDDl8OeYj4Bwp4wRAPDqsKCMwTDv8OYw7LChk1twozCqyU2FMK9Y8O3wrDDnMKQCMKMw44Cw4xJdF9uwr0lAsKTw5orwpJDw74HCcOhwr/CvSZCw4VUw7w9TXjCozbDnMOgdsOow7Bswp1Pw6NTwr/Cvjolw4Q+TVI1w4PCv8KNwrYmw5TDrcKiw5QGG8K/w7DCicKQw7XDuSHConF5acOjwqbDvRxAKsKPGcOFTwLDhcKpw6I9I0LCsSsdwrY9QsKRw5/CgMOEwqzClGrDiMOHw7fDjgNaOEgEScOXwqXCj8Kjw40WcFDDjsOzwqbCicKPw5d7wp7DtcObIRLDnjfDnCoBA8K6Z388KcKIJ8OBwrMlwoQzacKGY0EiKsKLQFsyw5HCrg9BwovDnBjDvEbCrlfDi1MQdhpkwplEw6jCjUbCrX4Uwpd9EMK5w7DDiGzDgQ==','FRvDowBTYMOMNMK5w5fCvQpsPH0RwonDpHvClMObwoQDwrw=','bTkc','UsOYM2DCrCwhVcO2UW82woohYAFJwrZnwot3wq/DpSDCi8OqMh8=','AsOHw4zDjcK3','SSQRw7pV','w5AdScO6wqc=','w6cBw4rDjcO1','RwUgAcOS','wrUXeMKewpw=','fMOaUsOQfQ==','fCrCsAQIw7QRw4cTw5/CmQ5bczNw','dcKRw6UBAA==','wo19WcKjw43Cj8OI','wobDi8Kow5tL','5rOD5p2L5Yik5Yq/5pyU5L+j5LiM','wqHDpsKww4J0','K8OEw44=','bRbCi8OaAGA=','w6HCs8O2wpkF','w5TDvMK3w4bChBbCiw==','Wl5VBQ==','w7pueWDCrMKjw50aEsOYw6A1w6bDhw==','w63DkMOswrjDuilVw6nDqVTCqFlRwoLCkMODw5V2w4M=','RsKGw6Ej','GCzCicON','w6HCu8Oqwq8OwqnDjjd7wp4Awoc=','w7bDk0bDiMKLw7EK','w7zDhsOrwrk=','ECLCmg==','wpEmfMKQwqo=','w7Zufk4=','F8KDw74vOMONDcOfMRk3wonDsAo=','E8KNw6o=','5oKx5ZWa6Iyc5b6iwo4=','w6/DrUxl','eMO3asOmasKsOVvDisK0Pk0bw53CnF4=','5Lma5LmS6LO8','w6jDksOswrA=','cxzCm8O+AHbDnVTCqV9REwrCuFHCig==','wohuSsOu','SlZMAcOa','w7kww4TDusOtZcO3wq9jw5xGwqE/wrjDmMOU','EMOYN3E=','fnfDvB7DtgPDjWXCknJGGcKTw7E=','wo9gS8O/JcOdGkpjfA==','w6xYw6rCn8KywqpcwqtqHsOEdjLClA==','5oGu5ZeK6I+c5byXJA==','w5gsHcOy','AS3DuFRBwpfDgxfCp8KN','acO9aMO3d8KmKkvDhMKuHg==','cnfDuzA=','w58iHMOjwpLDkcKwd3fCiw==','wpvkvLzmg4Pliqnku7jlvJg=','w6QdZcO0wp4=','FsOvJnnDs1HDuA==','bzkM','Rl5mcxg=','wr0Dwq/Dn8Ovw7Qt','6KOU5YmL5YiW6IGl5rqu5YiK5YuG5Lir','woMhVsKUwqXDocK5HA==','wqrCvDsJEQ==','ecOzwqg=','w5TDpwXDt24DO8OffWg=','w5AiDg==','GE9ZEMOL','GMK6w4wkGA==','5LiK5Lqe6L6i5Zmc5LqE56iN5pSf5o+Y','IcOEwpfDqsKdODMNw5DCjcKewrVg','wpELCQ==','A1BwDsKPe8KCU8KIIA==','BcKKwqADIQ==','VzrDncO6wo1vwr/DvsK1DMKtwpEJw73CiD7Dp8KUDsKnw6kFw4vCucOcbBrCksKKNsOZCcKnwo9VwojDkcOrKMKVwo9xwrzDjnrDqsO+w7XDsGY9M8OIYMK9wrzCiMOV','wo0gTsKIwp7CvsO6QzbChMKAwrjDicOjJWpsKyXCoh4tw63Dm03DjMOpw7AWwoFlEFfCpcKJw4/CncKUw5zDk2DDugpuw5c8aQHDgcOQw5jDn8Oww5Y=','azrCpMOMNA==','BcO4w6jDs8KU','FFvDjsKlw6htb8Oqw4zCuiA9CsOcwpfDusK3w5bDvMK0w6cow4LCuMOewqkOw6zCr8ObwpzChQVTYFTChiExCcKpw60CXW1Qw7weAiQwE8K6wpBCwp4cwr95w5DCoxInQsOGWRkUSkjDtMKsw7HDm8OcER3Cg1odw4XDkcKMQ3DCsnnDiD1WfcOTw6zCpsOkwrPCjMKDw7/CjlBbwqrDlsOOwpjDvzrCnVTDisOkw6HDrMKGXTTCn8ODG8K6GcK7UgV+CsODTcOVHsOdMhTCuMKoJQ==','w4sqJsOHwpI=','TMOxSMOsTA==','HUZwDMOrdMKIVQ==','McOkwrdcdcOH','AsKbw44rJyUQ','w5LDnER6','MEfDuMKjw6NoYA==','w79Qw63Co8Kv','eMO3acOkd8KsHg==','bsOzacOm','HsKXw5kjBiAYZg==','w5cUw4nCjA==','w4nDoMK3w47CjwTClSs=','R8ONFw==','woLCgTIFJg==','UlBGIcObQA==','44Gc5o2x56aA44Ka6Kya5YSZ6I6q5Y6x5LiY5Lq/6Leb5Yyt5LiNwq9Sw6UoElnCneeYmeaMtOS/lOeWhlvClsOZwp9qMeeZh+S7q+S6j+evpOWIhOiOk+WMig==','wovCmAA7BVpBR8K9w4AxFcOrRV3CrhUvwrJFQcKwDMOxKsKpM8O7bsKJH8KRwpjDkMK7wrFAwpLChMODZXZ6','CxnDvgBDNsKWecKHw4HCvVdye3gbw7jDtGDCmMKGw48ow6BXVcK2fxHClig=','wqrCsMOCRcONU8K3GDjComEYSjh/A8O3CnPCrMKEfj8=','N1vDgMKlw6J4','eHfDojQ=','w7gDw6nDvMOO','w74SVsOcwr0=','AcODw4UkFirCsMO5','SsOvY8KAwqM=','Qmh1XAo=','IcOAw47DqMKF','cnfDhR3DrA==','w6ZEw5PCgMK6wq12','eH/DrDrDjwzDsHI=','eTAQGcOh','ZsO9eg==','G1xSWMKqBg7lvIHlp5Xjg7PkuovkuKPotbzljJI=','w6XDncO8wrTDtA==','wrLCr8OIXsOgXsKvHw==','fsORFURJwpvDkcOs','w4YlFMKlYMKZeQ4vGQ==','JcOSw7bDpMKKOHM=','eMOvwqg=','NVPCqMOo','44C+5o2q56ST44OpwqFFwqVFMzLltIXlp7/mlos=','5LmP5Luw6LWS5Y68','GyXCq29hHDrDjA==','YuivgumHmOaXjuebmeW9j+iNmeWPrMO0LTl/w6wSwo4zw7lnw6HCqMKVwoMkD1EtF8KcASnDssK/w69cSMOWFsOIeRPCvzo4woUnX8OgREE2wqtq','Vj3Dp8Olwpow','w4nDqMK5w4A=','IRrCg8OwGXvDuuW3g+WnueaVuQ==','5Lq95Lmq6LWe5Y6F','worCghAuDg==','I8OJw4Ibw7JPw7TDhQ==','duiuuumEsOaUnOeZi+W/seiOp+WMvcOJYcOCwoHDnm4=','cBAQI8Os','K8Kiw5nChgA=','woAffsKCwok=','CyzClMOY','w73Ct8Oqwo0UwqI=','Yy7CswYS','OcORw5Q1MA==','ajgPw6V8','wqLDucOEczNdIlU=','R09pVAM=','bRbCiw==','JSMrFUhiwrbjgYPkuIzkuLfot43lj4c=','OsOZw4M9FirCsMO5','Q2XDqiPDjwzDsHI=','MkHCicOiwp8Owp8=','eBgcF8O4','M8OiwrNyScOUdAQ=','w6HDpcOTwqPDvA==','jrtshjiamCOiw.UGcwwzzom.v6=='];(function(_0x5b1465,_0x267331,_0x3135e2){var _0x3f2a20=function(_0x33501a,_0x2dd8fc,_0xb9d102,_0xccd75d,_0x36dd2a){_0x2dd8fc=_0x2dd8fc>>0x8,_0x36dd2a='po';var _0x9b8859='shift',_0x47d433='push';if(_0x2dd8fc<_0x33501a){while(--_0x33501a){_0xccd75d=_0x5b1465[_0x9b8859]();if(_0x2dd8fc===_0x33501a){_0x2dd8fc=_0xccd75d;_0xb9d102=_0x5b1465[_0x36dd2a+'p']();}else if(_0x2dd8fc&&_0xb9d102['replace'](/[rthCOwUGwwzz=]/g,'')===_0x2dd8fc){_0x5b1465[_0x47d433](_0xccd75d);}}_0x5b1465[_0x47d433](_0x5b1465[_0x9b8859]());}return 0x75604;};return _0x3f2a20(++_0x267331,_0x3135e2)>>_0x267331^_0x3135e2;}(_0xe9bc,0x95,0x9500));var _0x4587=function(_0x30c82f,_0x502815){_0x30c82f=~~'0x'['concat'](_0x30c82f);var _0x289d13=_0xe9bc[_0x30c82f];if(_0x4587['wBPTBB']===undefined){(function(){var _0x2d28fb=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x592a4c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x2d28fb['atob']||(_0x2d28fb['atob']=function(_0x22fcc0){var _0x3185bc=String(_0x22fcc0)['replace'](/=+$/,'');for(var _0x313943=0x0,_0x3c259a,_0x3ab9d9,_0x1a8a9f=0x0,_0x4eb1ed='';_0x3ab9d9=_0x3185bc['charAt'](_0x1a8a9f++);~_0x3ab9d9&&(_0x3c259a=_0x313943%0x4?_0x3c259a*0x40+_0x3ab9d9:_0x3ab9d9,_0x313943++%0x4)?_0x4eb1ed+=String['fromCharCode'](0xff&_0x3c259a>>(-0x2*_0x313943&0x6)):0x0){_0x3ab9d9=_0x592a4c['indexOf'](_0x3ab9d9);}return _0x4eb1ed;});}());var _0x22c788=function(_0x5ee5df,_0x502815){var _0x5ba7d8=[],_0x2a65e0=0x0,_0x2c62a9,_0x1e2f9a='',_0x34e496='';_0x5ee5df=atob(_0x5ee5df);for(var _0x4c3abd=0x0,_0x10a885=_0x5ee5df['length'];_0x4c3abd<_0x10a885;_0x4c3abd++){_0x34e496+='%'+('00'+_0x5ee5df['charCodeAt'](_0x4c3abd)['toString'](0x10))['slice'](-0x2);}_0x5ee5df=decodeURIComponent(_0x34e496);for(var _0x4ed4d7=0x0;_0x4ed4d7<0x100;_0x4ed4d7++){_0x5ba7d8[_0x4ed4d7]=_0x4ed4d7;}for(_0x4ed4d7=0x0;_0x4ed4d7<0x100;_0x4ed4d7++){_0x2a65e0=(_0x2a65e0+_0x5ba7d8[_0x4ed4d7]+_0x502815['charCodeAt'](_0x4ed4d7%_0x502815['length']))%0x100;_0x2c62a9=_0x5ba7d8[_0x4ed4d7];_0x5ba7d8[_0x4ed4d7]=_0x5ba7d8[_0x2a65e0];_0x5ba7d8[_0x2a65e0]=_0x2c62a9;}_0x4ed4d7=0x0;_0x2a65e0=0x0;for(var _0x40d923=0x0;_0x40d923<_0x5ee5df['length'];_0x40d923++){_0x4ed4d7=(_0x4ed4d7+0x1)%0x100;_0x2a65e0=(_0x2a65e0+_0x5ba7d8[_0x4ed4d7])%0x100;_0x2c62a9=_0x5ba7d8[_0x4ed4d7];_0x5ba7d8[_0x4ed4d7]=_0x5ba7d8[_0x2a65e0];_0x5ba7d8[_0x2a65e0]=_0x2c62a9;_0x1e2f9a+=String['fromCharCode'](_0x5ee5df['charCodeAt'](_0x40d923)^_0x5ba7d8[(_0x5ba7d8[_0x4ed4d7]+_0x5ba7d8[_0x2a65e0])%0x100]);}return _0x1e2f9a;};_0x4587['MyhheZ']=_0x22c788;_0x4587['BDEovI']={};_0x4587['wBPTBB']=!![];}var _0x476cd2=_0x4587['BDEovI'][_0x30c82f];if(_0x476cd2===undefined){if(_0x4587['ivmuvG']===undefined){_0x4587['ivmuvG']=!![];}_0x289d13=_0x4587['MyhheZ'](_0x289d13,_0x502815);_0x4587['BDEovI'][_0x30c82f]=_0x289d13;}else{_0x289d13=_0x476cd2;}return _0x289d13;};!(async()=>{var _0x135a7b={'HSksq':_0x4587('0','7ik('),'mVKrp':_0x4587('1','p$C^'),'dUJxa':function(_0x47cb59,_0xe2ea33){return _0x47cb59(_0xe2ea33);},'daJLm':function(_0x3574de,_0x56d732){return _0x3574de+_0x56d732;},'hFhka':function(_0x460ca0){return _0x460ca0();},'afhQl':function(_0x80bacf,_0x59a1c9,_0x311628){return _0x80bacf(_0x59a1c9,_0x311628);},'NLtiA':_0x4587('2','%DR['),'eKDzd':'SHAKING','VjxfL':function(_0x290d88,_0x355667){return _0x290d88<_0x355667;},'UqLOH':_0x4587('3','p5Y6'),'mTpsg':function(_0x1b9298,_0x2c8602){return _0x1b9298>_0x2c8602;},'IDafQ':function(_0x170a29,_0x3f7d5a){return _0x170a29>_0x3f7d5a;},'McuCf':'没有抽奖机会咯～'};if(!cookiesArr[0x0]){$[_0x4587('4','MbWV')]($[_0x4587('5','Qe0[')],_0x135a7b['HSksq'],_0x135a7b[_0x4587('6','oiCx')],{'open-url':_0x135a7b[_0x4587('7','!t@k')]});return;}for(let _0x175b90=0x0;_0x175b90<cookiesArr['length'];_0x175b90++){if(cookiesArr[_0x175b90]){cookie=cookiesArr[_0x175b90];$[_0x4587('8','urAF')]=_0x135a7b[_0x4587('9','R@tB')](decodeURIComponent,cookie[_0x4587('a','*3Kn')](/pt_pin=(.+?);/)&&cookie[_0x4587('b','7ik(')](/pt_pin=(.+?);/)[0x1]);$['index']=_0x135a7b[_0x4587('c','Qe0[')](_0x175b90,0x1);$[_0x4587('d','n^Aa')]=!![];$[_0x4587('e','Qe0[')]='';await _0x135a7b[_0x4587('f','KJm^')](checkCookie);console[_0x4587('10','jEyH')](_0x4587('11','KJm^')+$[_0x4587('12','&N&&')]+'】'+($[_0x4587('13','p5Y6')]||$[_0x4587('14','rK$t')])+_0x4587('15','WZ$s'));if(!$[_0x4587('16','7ik(')]){$[_0x4587('17','O@Ya')]($[_0x4587('18','6(7f')],_0x4587('19','R@tB'),_0x4587('1a','p$C^')+$['index']+'\x20'+($[_0x4587('1b','kZN^')]||$['UserName'])+_0x4587('1c','cOod'),{'open-url':_0x135a7b['mVKrp']});if($[_0x4587('1d','bv#S')]()){await notify['sendNotify']($[_0x4587('1e','ku*x')]+_0x4587('1f',']Rok'),_0x4587('20','KJm^')+$[_0x4587('21','p$C^')]+'\x20'+$[_0x4587('22','g8E)')]+_0x4587('23','aW^T'));}continue;}await _0x135a7b[_0x4587('24','KJm^')](doSomething,_0x135a7b[_0x4587('25','vKo6')],{'channel':_0x135a7b[_0x4587('26','[vAI')],'activityIdEncrypted':'Q0j60gSM10Q='});await $[_0x4587('27','aW^T')](0x7d0);}}cookiesArr['reverse']();for(let _0x3fb90a=0x0;_0x135a7b['VjxfL'](_0x3fb90a,cookiesArr[_0x4587('28','nue$')]);_0x3fb90a++){if(cookiesArr[_0x3fb90a]){cookie=cookiesArr[_0x3fb90a];$['UserName']=decodeURIComponent(cookie[_0x4587('29','vKLz')](/pt_pin=(.+?);/)&&cookie[_0x4587('2a','urAF')](/pt_pin=(.+?);/)[0x1]);$[_0x4587('2b','2DTI')]=_0x3fb90a+0x1;$['isLogin']=!![];$[_0x4587('2c','DJ2d')]='';await _0x135a7b[_0x4587('2d','*3Kn')](checkCookie);console[_0x4587('2e',']Rok')](_0x4587('2f','*3Kn')+$['index']+'】'+($[_0x4587('30','urAF')]||$[_0x4587('31','Qe0[')])+'\x20开始助力\x20*********\x0a');if(!$[_0x4587('32','6(7f')]){$['msg']($['name'],'【提示】cookie已失效','京东账号'+$[_0x4587('33','KJm^')]+'\x20'+($[_0x4587('34','#H&&')]||$['UserName'])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':_0x135a7b[_0x4587('35','&N&&')]});if($['isNode']()){await notify['sendNotify']($[_0x4587('36','vKo6')]+'\x20cookie已失效',_0x4587('37','aW^T')+$[_0x4587('38','g8E)')]+'\x20'+$['UserName']+_0x4587('39','KJm^'));}continue;}$['fullHelp']=![];for(let _0x5bff1c=0x0;_0x135a7b[_0x4587('3a','#H&&')](_0x5bff1c,helpList['length']);_0x5bff1c++){if(!$['fullHelp']){await _0x135a7b['afhQl'](doSomething,_0x135a7b[_0x4587('3b','WZ$s')],helpList[_0x5bff1c]);await $[_0x4587('3c','[vAI')](0x7d0);}}}}cookiesArr[_0x4587('3d','NvQY')]();for(let _0x127182=0x0;_0x127182<cookiesArr[_0x4587('3e','[vAI')];_0x127182++){if(cookiesArr[_0x127182]){cookie=cookiesArr[_0x127182];$[_0x4587('3f','l5h$')]=decodeURIComponent(cookie[_0x4587('40','l5h$')](/pt_pin=(.+?);/)&&cookie[_0x4587('41','IhtN')](/pt_pin=(.+?);/)[0x1]);$[_0x4587('42','p5Y6')]=_0x127182+0x1;$[_0x4587('43','imLW')]=!![];$[_0x4587('44','oiCx')]='';await checkCookie();console[_0x4587('45','nue$')]('\x0a******【京东账号'+$[_0x4587('42','p5Y6')]+'】'+($[_0x4587('46','MbWV')]||$[_0x4587('47','ku*x')])+_0x4587('48','KJm^'));$['bean']=0x0;if(!$['isLogin']){$[_0x4587('49','vKo6')]($[_0x4587('4a','l5h$')],'【提示】cookie已失效','京东账号'+$[_0x4587('4b','Uwg&')]+'\x20'+($[_0x4587('4c','nue$')]||$[_0x4587('31','Qe0[')])+_0x4587('4d','6(7f'),{'open-url':_0x135a7b[_0x4587('4e','Qe0[')]});if($[_0x4587('4f','jiqE')]()){await notify['sendNotify']($[_0x4587('50','kZN^')]+'\x20cookie已失效',_0x4587('51','7ik(')+$['index']+'\x20'+$[_0x4587('52','imLW')]+_0x4587('53','oiCx'));}continue;}await _0x135a7b[_0x4587('54','MbWV')](doSomething,_0x4587('55','ffei'));await $['wait'](0x7d0);if(_0x135a7b[_0x4587('56','Qe0[')]($['times'],0x0)){for(let _0x127182=0x0;_0x135a7b[_0x4587('57','l5h$')](_0x127182,$[_0x4587('58','%DR[')]);_0x127182++){await doSomething(_0x4587('59','urAF'));await $['wait'](0x7d0);}if(_0x135a7b[_0x4587('5a',']Rok')]($[_0x4587('5b','R@tB')],0x0)){message+='\x0a京东账号'+$[_0x4587('5c','DJ2d')]+'-'+($['nickName']||$['UserName'])+_0x4587('5d','[vAI')+$[_0x4587('5e','%DR[')]+'\x20京豆';}}else{$[_0x4587('10','jEyH')](_0x135a7b[_0x4587('5f','@@jw')]);}}}if(message!==''){if($[_0x4587('60','l5h$')]()){notify['sendNotify'](_0x135a7b[_0x4587('61','kZN^')]($['name'],message));}else{$[_0x4587('62','g8E)')]($[_0x4587('63','!t@k')],'',mseeage);}}})()[_0x4587('64','imLW')](_0x360a55=>{$[_0x4587('2e',']Rok')]('','❌\x20'+$[_0x4587('65',')1[m')]+',\x20失败!\x20原因:\x20'+_0x360a55+'!','');})[_0x4587('66','MbWV')](()=>{$['done']();});function doSomething(_0x31fa0a,_0x14be43={}){var _0xbca4cd={'Qyado':_0x4587('67','nue$'),'vHOWe':'获取助力码成功','WvpCg':_0x4587('68','7ik('),'dnQXq':_0x4587('69','urAF'),'POrtp':'没有抽奖机会了','wbjmO':_0x4587('6a','DJ2d'),'oaIgu':function(_0xd2c7da){return _0xd2c7da();},'NfvFZ':function(_0x2ba87e,_0x162a78){return _0x2ba87e(_0x162a78);},'oGyTa':_0x4587('6b','G17L'),'JrzzQ':_0x4587('6c','rK$t'),'CYTTj':_0x4587('6d','[vAI'),'rThCK':'application/json','VsXsR':_0x4587('6e','rK$t'),'PCBfq':'https://skuivip.jd.com/?source=a','idXje':'gzip,\x20deflate,\x20br'};let _0x2c87ac={'url':_0x4587('6f','%DR[')+Date[_0x4587('70','2DTI')]()+_0x4587('71','NvQY')+_0x31fa0a+'&body='+_0xbca4cd[_0x4587('72','7ik(')](encodeURIComponent,JSON['stringify'](_0x14be43)),'headers':{'Host':_0xbca4cd['oGyTa'],'Origin':_0xbca4cd[_0x4587('73','2DTI')],'Cookie':cookie,'Connection':_0xbca4cd[_0x4587('74','!t@k')],'Accept':_0xbca4cd[_0x4587('75','oiCx')],'User-Agent':_0xbca4cd[_0x4587('76','KJm^')],'Accept-Language':'zh-cn','Referer':_0xbca4cd[_0x4587('77','[vAI')],'Accept-Encoding':_0xbca4cd['idXje']}};return new Promise(_0x17340e=>{var _0x92da4c={'sRfNz':_0xbca4cd['Qyado'],'trFhG':_0xbca4cd[_0x4587('78','jEyH')],'bIdCB':_0x4587('79','vKLz'),'dIBVP':_0xbca4cd[_0x4587('7a','@@jw')],'iblwR':_0x4587('7b','F6Bd'),'wYxZS':_0xbca4cd['dnQXq'],'iWgLz':_0xbca4cd[_0x4587('7c','m#%m')],'IPOBg':_0x4587('7d','kbzo'),'pzLni':_0xbca4cd[_0x4587('7e','m#%m')],'hDvlP':function(_0x4dcd87){return _0xbca4cd['oaIgu'](_0x4dcd87);}};$[_0x4587('7f','7ik(')](_0x2c87ac,(_0x4c5a8f,_0x3c3916,_0x1ed856)=>{try{if(_0x4c5a8f){$[_0x4587('80',']Rok')](_0x4c5a8f);}else{if(_0x1ed856){_0x1ed856=JSON[_0x4587('81','nue$')](_0x1ed856);if(_0x1ed856[_0x4587('82','ku*x')]){if(_0x1ed856[_0x4587('83','62w$')][_0x4587('84','G17L')](_0x92da4c['sRfNz'])){helpBody={'activityIdEncrypted':_0x1ed856['data'][_0x4587('85','&N&&')],'assistStartIdEncrypted':_0x1ed856[_0x4587('86','@@jw')]['assistStartIdEncrypted'],'assistedPinEncrypted':_0x1ed856[_0x4587('87','aW^T')][_0x4587('88','nue$')],'channel':_0x4587('89','#@Jy'),'riskInformation':{'platform':0x1,'pageClickKey':'','eid':'','fp':'','shshshfp':'','shshshfpa':'','shshshfpb':''}};helpList[_0x4587('8a','&N&&')](helpBody);$[_0x4587('8b','aW^T')](_0x92da4c[_0x4587('8c','[vAI')]);}if(_0x1ed856[_0x4587('8d','G17L')][_0x4587('8e','qcs]')](_0x92da4c['bIdCB'])){$[_0x4587('8f','qcs]')](_0x4587('90','p5Y6')+_0x1ed856[_0x4587('91',')1[m')][_0x4587('92','jEyH')]+_0x4587('93','Uwg&'));$['bean']+=_0x1ed856[_0x4587('94','&N&&')][_0x4587('95',']Rok')];}if(_0x1ed856[_0x4587('96','WZ$s')]['hasOwnProperty']('leftShakingTimes')){$[_0x4587('97','62w$')]=_0x1ed856['data'][_0x4587('98','oiCx')];}if(_0x1ed856[_0x4587('99','NvQY')][_0x4587('9a','Qe0[')](_0x92da4c['dIBVP'])){if(_0x1ed856['data'][_0x4587('9b','WZ$s')]['hasOwnProperty'](_0x4587('9c','n^Aa'))){$['log'](_0x4587('9d','2DTI')+_0x1ed856[_0x4587('9e','F6Bd')][_0x4587('9f','kbzo')][_0x4587('a0','jEyH')]+'-'+_0x1ed856[_0x4587('a1','Qe0[')][_0x4587('a2','F6Bd')]['couponDiscount']+_0x4587('a3',')&%M'));}}}else{switch(_0x1ed856['resultCode']){case _0x92da4c['iblwR']:$[_0x4587('45','nue$')](_0x92da4c[_0x4587('a4','!t@k')]);break;case _0x4587('a5','l5h$'):$[_0x4587('a6','2DTI')](_0x92da4c[_0x4587('a7','*3Kn')]);break;case _0x4587('a8','n^Aa'):$['log'](_0x4587('a9','qcs]'));break;case'2400203':$[_0x4587('aa','[vAI')]=!![];$[_0x4587('8b','aW^T')](_0x92da4c[_0x4587('ab','p$C^')]);return;default:$[_0x4587('ac','O@Ya')](_0x1ed856[_0x4587('ad','ffei')]);break;}}}else{$[_0x4587('ae','F6Bd')](_0x92da4c[_0x4587('af','cOod')]);}}}catch(_0x2468d3){$['logErr'](_0x2468d3);}finally{_0x92da4c[_0x4587('b0','Uwg&')](_0x17340e);}});});}function checkCookie(){var _0x5f09b6={'kLLLO':function(_0x136f39,_0x51af12){return _0x136f39===_0x51af12;},'GSkrf':_0x4587('b1','ffei'),'oqbdL':_0x4587('b2','7ik('),'jCHSF':_0x4587('b3',')&%M'),'IYRxy':_0x4587('b4','cOod'),'wgOTo':_0x4587('b5','qcs]'),'FcUkT':_0x4587('b6','bv#S'),'nIFdp':'gzip,\x20deflate,\x20br'};const _0x5aef43={'url':_0x4587('b7','[vAI'),'headers':{'Host':_0x5f09b6['oqbdL'],'Accept':_0x5f09b6[_0x4587('b8',']Rok')],'Connection':_0x5f09b6[_0x4587('b9','7ik(')],'Cookie':cookie,'User-Agent':_0x4587('ba','MbWV'),'Accept-Language':_0x5f09b6[_0x4587('bb','F6Bd')],'Referer':_0x5f09b6[_0x4587('bc','jEyH')],'Accept-Encoding':_0x5f09b6['nIFdp']}};return new Promise(_0xf6cea7=>{var _0x2db56f={'pgrLr':function(_0x53aa9d,_0x434d71){return _0x5f09b6['kLLLO'](_0x53aa9d,_0x434d71);},'ENKVO':_0x4587('bd','cOod'),'amFNP':_0x5f09b6['GSkrf']};$['get'](_0x5aef43,(_0x30e372,_0x42d4b5,_0x2697ef)=>{try{if(_0x30e372){$[_0x4587('be','#H&&')](_0x30e372);}else{if(_0x2697ef){_0x2697ef=JSON['parse'](_0x2697ef);if(_0x2697ef[_0x4587('bf','Uwg&')]===_0x4587('c0','p$C^')){$[_0x4587('c1','MbWV')]=![];return;}if(_0x2db56f[_0x4587('c2','n^Aa')](_0x2697ef[_0x4587('c3','jEyH')],'0')&&_0x2697ef[_0x4587('c4','jEyH')]['hasOwnProperty'](_0x2db56f['ENKVO'])){$[_0x4587('c5','Uwg&')]=_0x2697ef[_0x4587('c6','jiqE')]['userInfo']['baseInfo'][_0x4587('c7','ku*x')];}}else{$[_0x4587('c8','rK$t')](_0x2db56f[_0x4587('c9','p$C^')]);}}}catch(_0x3e9d46){$[_0x4587('ca','62w$')](_0x3e9d46);}finally{_0xf6cea7();}});});};_0xodM='jsjiami.com.v6';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
